import{Q as l,a as C}from"./preview-a78ef97b.js";import"./iframe-6b8a0b78.js";import"../sb-preview/runtime.js";import"./chunk-DMDGLPPZ-219a4511.js";class x{constructor(t){this.chartCtx=t}drawGridLine(t,a,h,s,i="#1A1B1F"){this.chartCtx.save(),this.chartCtx.strokeStyle=i,this.chartCtx.beginPath(),this.chartCtx.moveTo(t,a),this.chartCtx.lineTo(h,s),this.chartCtx.stroke(),this.chartCtx.restore()}}class v{constructor(t){this.chartCtx=t}addLabel(t,a,h,s){this.chartCtx.save(),this.chartCtx.font="12px",s?(this.chartCtx.textBaseline="middle",this.chartCtx.fillText(t,a,h)):(this.chartCtx.textAlign="center",this.chartCtx.fillText(t,a,h+4)),this.chartCtx.restore()}getLabelScale(t,a,h){if(t<12){for(let s=2;s<=a;s++)if(a%s===0&&t*s*h>12)return s}else return 1}}class p{constructor(t,a,h,s){this.chartCanvas=t,this.chartCtx=a,this.data=h,this.options=s,this.scale=1,this.commonShapes=new x(a),this.textUtil=new v(a)}drawChart(){try{const t=Math.max(...Object.values(this.data)),a=Object.values(this.data),h=Object.keys(this.data),s=(this.chartCanvas.width-32)/a.length,i=(this.chartCanvas.height-32)/t,e=a.length*s/this.chartCanvas.width,r=t*i/this.chartCanvas.height;this.scale=this.textUtil.getLabelScale(i,t,r),this.drawGrid(t,s,i,e,r,a),this.addLabels(t,s,i,e,r,h);for(let o in a){const n=24+s*parseInt(o)*e,d=16+(t*i-a[o]*i)*r;this.drawChartBar(n,d,(s-5)*e,a[o]*i*r)}}catch(t){console.log("%c Chart draw error ","background: #BA1A1A; color: #fff; padding: 2px;",t)}}drawGrid(t,a,h,s,i,e){const r=e.length*a*s+24,o=t*h*i;this.commonShapes.drawGridLine(16,16,16,o+16),this.commonShapes.drawGridLine(16,o+16,r,o+16)}addLabels(t,a,h,s,i,e){for(let r=0;r<t+1;r++)if(r%this.scale===0){const n=(t-r)*h*i+16;this.textUtil.addLabel(`${r}`,0,n,!0)}for(let r in e){const o=24+a*parseInt(r)+a*s/2,n=16+t*h;this.textUtil.addLabel(e[r],o*s,n,!1)}}drawChartBar(t,a,h,s){var i;let e="#5390F1";!((i=this.options)===null||i===void 0)&&i.color&&(e=this.options.color),this.chartCtx.save(),this.chartCtx.fillStyle=e,this.chartCtx.fillRect(t,a,h,s),this.chartCtx.restore()}}const u=class{constructor(c){l(this,c),this.data=void 0,this.options=void 0}componentDidLoad(){var c,t;!((c=this.options)===null||c===void 0)&&c.height&&(!((t=this.options)===null||t===void 0)&&t.width)?(this.chartCanvas.height=this.options.height,this.chartCanvas.width=this.options.width):(this.chartCanvas.height=300,this.chartCanvas.width=300),this.chartCtx=this.chartCanvas.getContext("2d"),this.drawBasicBarChart()}componentDidUpdate(){this.drawBasicBarChart()}drawBasicBarChart(){new p(this.chartCanvas,this.chartCtx,this.data,this.options).drawChart()}render(){return C("canvas",{ref:c=>this.chartCanvas=c})}};export{u as solias_barchart};
//# sourceMappingURL=p-b31d63d1.entry-fb0007d1.js.map
